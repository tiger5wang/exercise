<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div>JQuery deferred测试</div>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script>
    // let wait = function () {
    //     let task = function () {
    //         console.log('完成')
    //     };
    //     setTimeout(task, 2000)
    // };
    // wait()

    // function waitHandler() {
    //     let dtd = $.Deferred();
    //     let wait = function (dtd) {
    //         let task = function () {
    //             console.log('完成')
    //             //成功后执行
    //             dtd.resolve({code: 200,description: '成功'});
    //             // 失败后执行
    //             // dtd.reject()
    //         };
    //         setTimeout(task, 2000);
    //         return dtd
    //     };
    //     return wait(dtd)
    // }
    //
    // let w = waitHandler();
    // w.then((res) => {
    //     console.log('成功',res.description)
    // },() => {
    //     console.log('失败')
    // })

    function waitHandler() {
        let dtd = $.Deferred();
        let wait = function (dtd) {
            let task = function () {
                console.log('renwu');
                // 成功回调
                dtd.resolve({code: 200, description: '成功'})
                //失败回调
                // dtd.reject({message: '失败'})
            };
            setTimeout(task, 2000)
            return dtd
        };
        return wait(dtd)
    }

    let w = waitHandler();
    w.then((response) => {
        console.log(response.description)
    }, (error) => {
        console.log(error.message)
    })



</script>

</body>
</html>